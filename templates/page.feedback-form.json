{"sections":{"banner":{"type":"banner-image","disabled":true,"settings":{}},"main":{"type":"main-page","settings":{"page_alignment":"a-left"}},"16268893167298b91c":{"type":"story","blocks":{"16268893167298b91c-0":{"type":"text","settings":{"text":"<p>Pair text with an image to add details about your products, brand and selling proposition.<\/p>","button":"","link":"","column_size":2,"block_height":"medium","center_align":false,"color":"#000000","background":"#ededed","font_size":15}},"16268893167298b91c-1":{"type":"video","settings":{"video_url":"","description":"Describe the video for customers using screen readers","column_size":4,"block_height":"medium"}},"16268893167298b91c-2":{"type":"image","settings":{"link":"","column_size":3,"block_height":"medium"}},"16268893167298b91c-3":{"type":"text","settings":{"text":"<p>Pair text with an image to add details about your products, brand and selling proposition.<\/p>","button":"","link":"","column_size":3,"block_height":"medium","center_align":false,"color":"#000000","background":"#ededed","font_size":15}},"16268893167298b91c-4":{"type":"text","settings":{"text":"<p>Pair text with an image to add details about your products, brand and selling proposition.<\/p>","button":"","link":"","column_size":2,"block_height":"medium","center_align":false,"color":"#000000","background":"#ededed","font_size":15}},"16268893167298b91c-5":{"type":"image","settings":{"link":"","column_size":2,"block_height":"medium"}},"16268893167298b91c-6":{"type":"image","settings":{"link":"","column_size":2,"block_height":"medium"}}},"block_order":["16268893167298b91c-0","16268893167298b91c-1","16268893167298b91c-2","16268893167298b91c-3","16268893167298b91c-4","16268893167298b91c-5","16268893167298b91c-6"],"disabled":true,"settings":{"heading":"Our story","section_padding":"both"}},"custom_liquid_fY4jfp":{"type":"custom-liquid","disabled":true,"settings":{"liquid":"<link rel=\"stylesheet\" href=\"https:\/\/cdnjs.cloudflare.com\/ajax\/libs\/font-awesome\/5.15.3\/css\/all.min.css\">\n<style>\n    .return-container {\n        max-width: 400px;\n        margin: 50px auto;\n        padding: 20px;\n        background-color: #ffffff;\n        border-radius: 5px;\n        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n    }\n    \n    .return-container h2 {\n        text-align: center;\n        margin-bottom: 10px;\n        color: #333;\n    }\n    \n    .return-container label {\n        display: block;\n        margin-top: 10px;\n        font-weight: bold;\n        color: #555;\n    }\n    \n    .return-container input {\n        width: 100%;\n        padding: 10px;\n        border: 1px solid #ccc;\n        border-radius: 3px;\n    }\n    \n    .return-container button {\n        display: block;\n        width: 100%;\n        padding: 10px;\n        background-color: #e22d18;\n        color: #fff;\n        border: none;\n        border-radius: 3px;\n        cursor: pointer;\n        text-align: center;\n        font-size: 16px;\n    }\n    \n    .return-container button:hover {\n        background-color: #000;\n    }\n    \n    .return-container .result {\n        margin-top: 20px;\n        border-top: 1px solid #ccc;\n        padding-top: 10px;\n    }\n    \n    .result-message {\n        text-align: center;\n        color: #333;\n    }\n    \n    .error-message {\n        color: #cc0000;\n        font-size: 14px;\n        margin-top: 5px;\n    }\n    \/* Additional styling for error messages *\/\n    \n    .error-message-detail {\n        font-size: 12px;\n        color: #cc0000;\n        margin-top: 5px;\n        padding-left: 5px;\n        border-left: 2px solid #cc0000;\n    }\n<\/style>\n<div class=\"return-container\">\n    <h2>Order Tracking<\/h2>\n    <form id=\"trackingForm\">\n        <label for=\"order_id\">Order ID:<\/label>\n        <input id=\"order_id\" placeholder=\"e.g.: SU1001\" type=\"text\" required>\n        <p class=\"error-message\" id=\"orderError\"><\/p>\n        <label for=\"c_number\">Email \/ Phone:<\/label>\n        <input id=\"c_number\" placeholder=\"johndoe@somesite.com\" type=\"text\" required>\n        <p class=\"error-message\" id=\"cNumberError\"><\/p>\n        <button id=\"submitBtn\">Track Order<\/button>\n    <\/form>\n    <div class=\"result\">\n        <p class=\"result-message\" id=\"resultMessage\"><\/p>\n    <\/div>\n<\/div>\n<script>\n    function showError(fieldId, message, detailed = false) {\n        const errorMessageElement = document.getElementById(fieldId + \"Error\");\n        errorMessageElement.textContent = message;\n\n        if (detailed) {\n            errorMessageElement.classList.add(\"error-message-detail\");\n        }\n    }\n\n\n    document.getElementById(\"submitBtn\").addEventListener(\"click\", function(event) {\n        event.preventDefault();\n\n        \/\/ Clear previous error messages\n        showError(\"order\", \"\"); \/\/ Clear Order ID error\n        showError(\"cNumber\", \"\"); \/\/ Clear Customer Number error\n\n\n        let orderId = document.getElementById(\"order_id\").value;\n        \/\/ let cNumber = \"+91\" + document.getElementById(\"c_number\").value;\n        let cNumber = document.getElementById(\"c_number\").value;\n\n        \/\/ Updated email pattern to allow numeric characters in the domain part of the email address\n        const emailPattern = \/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$\/;\n\n\n        \/\/ Regular expression for a valid phone number (example: +1234567890)\n        const phonePattern = \/^\\+?[0-9]{1,}$\/;\n\n        if (orderId === \"\") {\n            showError(\"order\", \"Please enter the Order ID.\", true);\n        } else if (!emailPattern.test(cNumber) && !phonePattern.test(cNumber)) {\n            showError(\"cNumber\", \"Please enter the Customer email ID or Phone Number.\", true);\n        } else {\n            const url = \"https:\/\/styleunion.online\/api\/shopify\/style-union\/order\";\n            let data = {\n                \"name\": orderId,\n                \"status\": \"any\",\n                \"key\": \"14c8f92d5ed852837e28a1081ec35ad18b9e10aeeb4a10fff076506489504272a6afaefbe9c65446961c85debbe5e9a4\"\n            };\n\n            axios.post(url, data)\n                .then(function(response) {\n                    console.log(response.data[0]);\n                    let omuniOrderId = response.data[0].id;\n                    if (emailPattern.test(cNumber)) {\n                        console.log('Email Entered');\n                        let customerNumber = response.data[0].customer.email;\n                        console.log(customerNumber);\n                        if (cNumber === customerNumber) {\n                            const omuniUrl = \"https:\/\/styleunion.online\/api\/style-union\/order\/tracking\";\n                            let omuniData = {\n                                marketPlaceOrderId: omuniOrderId,\n                                entityType: \"shopify\",\n                                showItemStatus: \"YES\",\n                                key: \"14c8f92d5ed852837e28a1081ec35ad18b9e10aeeb4a10fff076506489504272a6afaefbe9c65446961c85debbe5e9a4\"\n                            };\n\n                            axios.post(omuniUrl, omuniData)\n                                .then(function(response) {\n                                    if (response.data.statusTrackingUrl) {\n                                        window.location.href = response.data.statusTrackingUrl;\n                                        this.disabled = true;\n                                    } else {\n                                        showReturnError(\"Please try again later\", true);\n                                        this.disabled = true;\n                                    }\n                                })\n                                .catch(function() {\n                                    showReturnError(\"Please try again later\");\n                                    this.disabled = true;\n                                });\n                        } else {\n                            \/\/ showReturnError(`Order does not match customer number ${cNumber}`, true);\n                            showReturnError(`No such order found. Please make sure the order number entered is correct and the email\/phone is same as used in order.`, true);\n                        }\n                    } else if (phonePattern.test(cNumber)) {\n                        let customerNumber = response.data[0].billing_address.phone;\n                        console.log(customerNumber);\n                        if (cNumber === customerNumber) {\n                            const omuniUrl = \"https:\/\/styleunion.online\/api\/style-union\/order\/tracking\";\n                            let omuniData = {\n                                marketPlaceOrderId: omuniOrderId,\n                                entityType: \"shopify\",\n                                showItemStatus: \"YES\",\n                                key: \"14c8f92d5ed852837e28a1081ec35ad18b9e10aeeb4a10fff076506489504272a6afaefbe9c65446961c85debbe5e9a4\"\n                            };\n\n                            axios.post(omuniUrl, omuniData)\n                                .then(function(response) {\n                                    if (response.data.statusTrackingUrl) {\n                                        window.location.href = response.data.statusTrackingUrl;\n                                        this.disabled = true;\n                                    } else {\n                                        showReturnError(\"Please try again later\", true);\n                                        this.disabled = true;\n                                    }\n                                })\n                                .catch(function() {\n                                    showReturnError(\"Please try again later\");\n                                    this.disabled = true;\n                                });\n                        } else {\n                            \/\/ showReturnError(`Order does not match customer number ${cNumber}`, true);\n                            showReturnError(`No such order found. Please make sure the order number entered is correct and the email\/phone is same as used in order.`, true);\n                        }\n                    }\n                })\n                .catch(function() {\n                    showReturnError(\"Error fetching data. Please try again later.\");\n                });\n        }\n    });\n\n    function showReturnError(message, detailed = false) {\n        \/\/ Update the content of the resultMessage element with the error message and icon\n        const errorMessage = detailed ?\n            `<p class=\"error-message-detail\"><i class=\"fas fa-exclamation-circle\"><\/i> ${message}<\/p>` :\n            `<p class=\"error-message\"><i class=\"fas fa-exclamation-circle\"><\/i> ${message}<\/p>`;\n\n        document.getElementById(\"resultMessage\").innerHTML = errorMessage;\n\n        \/\/ \/\/ Toggle the error-message-detail class based on the detailed parameter\n        \/\/ if (detailed) {\n        \/\/     document.getElementById(\"resultMessage\").classList.add(\"error-message-detail\");\n        \/\/ } else {\n        \/\/     document.getElementById(\"resultMessage\").classList.remove(\"error-message-detail\");\n        \/\/ }\n    }\n<\/script>","section_padding":"both"}}},"order":["banner","main","16268893167298b91c","custom_liquid_fY4jfp"]}