{%- if template == 'index' -%}
<!-- Website Schema: -->
<script type="application/ld+json">
{
  "@context": "https://schema.org/",
  "@type": "WebSite",
  "name": "Style Union",
  "url": "https://styleunion.in/",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://styleunion.in/search?q={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>

<!-- Organization Schema (already available, but need to be optimized): -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "Style Union",
  "url": "https://styleunion.in/",
  "logo": "https://styleunion.in/cdn/shop/files/category_app_assets__1000___1000px___7_5a225ef2-7ced-45ea-861a-bdf34cdd0616.png?v=1721725988&width=1200",
  "contactPoint": {
    "@type": "ContactPoint",
    "telephone": "+91 9429692121",
    "contactType": "customer service",
    "areaServed": "IN",
    "availableLanguage": ["Hindi","en"]
  },
  "sameAs": [
    "https://www.facebook.com/Styleunion.in",
    "https://x.com/styleunion_in",
    "https://www.youtube.com/@styleunion_in",
    "https://www.instagram.com/styleunion.in/",
    "https://styleunion.in/"
  ]
}
</script>

{%- endif -%}




{% if template contains 'collection' %}
{% comment %}
  Generate complete schema with all products for SEO,
  but don't interfere with the page display logic
{% endcomment %}

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "CollectionPage",
  "name": "{{ collection.title | strip_html | escape }}",
  "url": "{{ shop.url }}{{ collection.url }}",
  "description": "{{ collection.description | strip_html | escape }}",
  "mainEntity": {
    "@type": "ItemList",
    "numberOfItems": {{ collection.products_count }},
    "itemListElement": [
      {% comment %}
        This captures ALL products in the collection for schema
        We use a separate loop that doesn't affect page display
      {% endcomment %}
      {% assign schema_products = collection.products %}
      {% for product in schema_products %}
      {
        "@type": "ListItem",
        "position": {{ forloop.index }},
        "item": {
          "@type": "Product",
          "name": "{{ product.title | strip_html | escape }}",
          "url": "{{ shop.url }}{{ product.url }}",
          "image": "{% if product.featured_image %}{{ product.featured_image | image_url: width: 1024 }}{% endif %}",
          "description": "{{ product.description | strip_html | truncate: 160 | escape }}",
          {% if product.selected_or_first_available_variant.sku != blank %}
          "sku": "{{ product.selected_or_first_available_variant.sku }}",
          {% endif %}
          "brand": {
            "@type": "Brand",
            "name": {{ product.vendor | json }}
          },
          "offers": {
            "@type": "Offer",
            "price": "{{ product.price | money_without_currency | remove: ',' }}",
            "priceCurrency": "{{ cart.currency.iso_code }}",
            "availability": "http://schema.org/{% if product.available %}InStock{% else %}OutOfStock{% endif %}",
            "priceValidUntil": "2030-01-01"
          }
        }
      }{% unless forloop.last %},{% endunless %}
      {% endfor %}
    ]
  }{% if collection.image %},
  "image": "{{ collection.image | image_url: width: 1024 }}"{% endif %},
  "publisher": {
    "@type": "Organization",
    "name": "{{ shop.name | escape }}"{% if settings.logo %},
    "logo": {
      "@type": "ImageObject",
      "url": "{{ settings.logo | image_url: width: 300 }}"
    }{% endif %}
  }
}
</script>
{% endif %}