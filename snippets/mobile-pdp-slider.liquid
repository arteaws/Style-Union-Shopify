<style>
    .product-image-slider-container {
      position: relative;
      max-width: 100%;
      display: flex;
      flex-direction: row-reverse; /* Thumbnails on left */
      gap: 20px;
    }

    .product-image-slider-container {
      position: relative;
      max-width: 100%;
      display: flex;
      flex-direction: row-reverse; /* Thumbnails on left */
      gap: 20px;
    }

    .product-image-slider {
      width: 80%;
      height: 500px; /* Set fixed height for desktop */
    }

    .product-image-thumbs {
      width: 15%;
      height: 500px; /* Match slider height */
      margin: 0;
    }

   .swiper-slide img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: top;
}

    .product-image-thumbs .swiper-slide {
      cursor: pointer;
      height: auto !important; /* Allow natural height */
    }

    .product-image-thumbs .swiper-slide-thumb-active {
      opacity: 1;
    }

    .img-custom-container {
      line-height: 0;
      height: 100%;
    }

    .product-image-thumbs .swiper-slide-thumb-active .img-custom-container {
      border: 1px solid #000000;
    }

    .product-image-slider-container .swiper-button-next,
    .product-image-slider-container .swiper-button-prev {
      width: 40px;
      height: 40px;
      background: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .product-image-slider-container .swiper-button-next::after,
    .product-image-slider-container .swiper-button-prev::after {
      font-size: 14px;
      color: #000; /* Arrow color */
      font-weight: bold;
    }

    /* Optional: Add a subtle shadow for better visibility */
    .product-image-slider-container .swiper-button-next,
    .product-image-slider-container .swiper-button-prev {
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    @media (max-width: 767px) {
      .product-image-slider-container {
        flex-direction: column;
      }

      .product-image-slider {
        width: 100%;
        height: auto; /* Reset height for mobile */
      }

      .product-image-thumbs {
        width: 100%;
        height: 100px; /* Keep thumbnails row on mobile */
      }

      .product-image-thumbs .swiper-slide {
        width: 25% !important; /* Force 4 thumbnails per row */
        height: 100% !important;
      }
    }
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">

<div class="product-image-slider-container parent-custom-container">
  <div class="custom-pdp-set">
    <div id="smartwishlist" data-product="{{ product.id }}" data-variant="{{ product.variants.first.id }}"></div>
  </div>
  <div class="swiper product-image-slider">
    <div class="swiper-wrapper">
      {% for media in product.media %}
        <div class="swiper-slide">
          {% case media.media_type %}
            {% when 'image' %}
              <img src="{{ media | img_url: '800x' }}" alt="{{ media.alt }}" loading="lazy" width="800" height="800">
            {% when 'external_video' %}
              <div class="product-single__media">
                {{ media | external_video_tag }}
              </div>
            {% when 'video' %}
              <div class="product-single__media">
                {{ media | video_tag: controls: true }}
              </div>
            {% when 'model' %}
              <div class="product-single__media">
                {{ media | model_viewer_tag }}
              </div>
            {% else %}
              <div class="product-single__media">
                {{ media | media_tag }}
              </div>
          {% endcase %}
        </div>
      {% endfor %}
    </div>
    <div class="swiper-button-next"></div>
    <div class="swiper-button-prev"></div>
  </div>

  <!-- Thumbnails -->
  <div class="swiper product-image-thumbs">
    <div class="swiper-wrapper">
      {% for media in product.media %}
        <div class="swiper-slide">
          <div class="img-custom-container">
            <img src="{{ media | img_url: '150x' }}" alt="{{ media.alt }}" loading="lazy" width="150" height="150">
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Initialize thumbnails slider - show all thumbnails vertically
    const thumbsSlider = new Swiper('.product-image-thumbs', {
      spaceBetween: 10,
      slidesPerView: 7,
      freeMode: true,
      watchSlidesProgress: true,
      direction: 'vertical',
      breakpoints: {
        320: { // Mobile
          direction: 'horizontal',
          slidesPerView: 4,
          freeMode: false
        },
        768: { // Desktop
          direction: 'vertical',
          slidesPerView: 7,
          freeMode: true
        }
      }
    });

    // Initialize main slider
    const productSlider = new Swiper('.product-image-slider', {
      spaceBetween: 10,
      slidesPerView: 1,
      loop: false,
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
      thumbs: {
        swiper: thumbsSlider,
      },
    });
  });
</script>
